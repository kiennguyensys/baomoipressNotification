{"version":3,"sources":["contexts/AuthContext.js","constants/api.js","screens/SignIn.js","screens/Panel.js","screens/NotificationCenter.js","screens/NotificationCron.js","screens/ScheduleHistory.js","components/PrivateRoute.js","App.js","registerServiceWorker.js","index.js"],"names":["authContext","createContext","AuthProvider","children","useState","loading","data","auth","setAuth","useEffect","JSON","parse","window","localStorage","getItem","setItem","stringify","Provider","value","setAuthData","apiUrl","SignIn","history","username","setUsername","password","setPassword","useContext","onFormSubmit","e","a","preventDefault","signInWithUsername","userToken","isAdmin","validateAdminAccess","replace","axios","post","authUrl","then","response","token","catch","err","alert","method","url","headers","roles","style","height","className","width","Form","onSubmit","Group","Label","Control","type","placeholder","onChange","target","Button","variant","Panel","onClick","push","NotificationCenter","title","setTitle","body","setBody","imageURL","setImageURL","slugData","setSlugData","recipientOption","setRecipientOption","singleFCMToken","setSingleFCMToken","gender","setGender","hobby","setHobby","ageRange","setAgeRange","validRecipientsNumber","setValidRecipientsNumber","isCheckingValidRecipients","setCheckingValidRecipients","filterQuery","setFilterQuery","sendingProgress","setSendingProgress","scheduleOption","setScheduleOption","Date","scheduleDateTime","setScheduleDateTime","scheduleRecurringExpression","setScheduleRecurringExpression","modalShow","setModalShow","firstUpdate","useRef","useLayoutEffect","current","checkValidRecipients","onChangeRecipientRadio","id","genderQuery","hobbyQuery","ageRangeQuery","queryOrder","toString","split","get","res","console","log","onSendSingleRecipient","sendScheduleNotifsToServer","onSendFilterRecipients","batchNumber","promises","pageNumber","all","results","fcmTokensBatch","forEach","chunk","length","fcmTokens","map","item","acf","fcmToken","tokens","topics","scheduleData","dateTime","recurringExpression","slug","image","scheduleAction","onChangeScheduleRadio","marginTop","position","top","right","marginRight","borderStyle","borderWidth","borderRadius","padding","overflow","as","Row","controlId","column","sm","Col","required","rows","marginLeft","Check","label","name","DropdownButton","onSelect","Dropdown","Item","eventKey","marginBottom","Spinner","animation","newDate","Modal","show","onHide","size","aria-labelledby","Header","closeButton","Title","Body","cronExpression","showResult","ProgressBar","now","NotificationCron","isCheckingCurrentTask","setCheckingCurrentTask","isTaskRunning","setTaskRunning","isServerError","setServerError","checkCronjob","action","message","ScheduleHistory","scheduledPlans","setScheduledPlans","getScheduledPlans","ListGroup","plan","idx","formattedDT","formattedCron","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","cronstrue","key","index","deleteTaskIndex","PrivateRoute","Component","component","rest","render","routeProps","to","App","path","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","error","ReactDOM","document","getElementById","URL","process","origin","addEventListener","fetch","status","indexOf","ready","unregister","reload","checkValidServiceWorker","registerServiceWorker"],"mappings":"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","file":"static/js/main.6f4c2ff5.chunk.js","sourcesContent":["import React, { createContext, useState, useEffect } from 'react';\n\nexport const authContext = createContext({});\n\nconst AuthProvider = ({ children }) => {\n  const [auth, setAuth] = useState({ loading: true, data: null });\n\n  const setAuthData = (data) => {\n    setAuth({data: data});\n  };\n\n  useEffect(() => {\n    setAuth({ loading: false, data: JSON.parse(window.localStorage.getItem('authData'))});\n  }, []);\n\n  useEffect(() => {\n    window.localStorage.setItem('authData', JSON.stringify(auth.data));\n  }, [auth.data]);\n\n  return (\n    <authContext.Provider value={{ auth, setAuthData }}>\n      {children}\n    </authContext.Provider>\n  );\n};\n\nexport default AuthProvider;","export const apiUrl = \"https://app.baomoi.press/wp-json/wp/v2/\"\nexport const acfUrl = \"https://app.baomoi.press/wp-json/acf/v3/\"\nexport const authUrl = \"https://app.baomoi.press/wp-json/jwt-auth/v1/\";","import React, { useState, useContext } from 'react';\nimport { Form, Button } from 'react-bootstrap';\nimport { authContext } from '../contexts/AuthContext';\nimport { apiUrl, authUrl } from '../constants/api.js';\nimport axios from 'axios';\n\n\nconst SignIn = ({history}) => {\n  const [username, setUsername] = useState();\n  const [password, setPassword] = useState();\n  const { setAuthData } = useContext(authContext);\n\n  const onFormSubmit = async(e) => {\n    e.preventDefault();\n\n    const userToken = await signInWithUsername();\n    let isAdmin = null;\n    if(userToken) isAdmin = await validateAdminAccess(userToken);\n\n    if(isAdmin) {\n        setAuthData({ username })\n        history.replace('/')\n    }\n  };\n\n  const signInWithUsername = () => {\n      return axios.post(authUrl + 'token', {\n          username: username,\n          password: password,\n      })\n          .then((response) => {\n              const userToken = response.data.token\n              return userToken\n         })\n          .catch((err) => {\n              alert(\"Username or password is invalid!\")\n              return undefined\n          });\n  }\n\n  const validateAdminAccess = (userToken) => {\n      return axios({\n          method: \"GET\",\n          url: apiUrl + 'current_user',\n          headers: {'Authorization': 'Bearer ' + userToken},\n      })\n          .then((response) => {\n              const role = response.data.roles[0]\n              if(role === 'administrator') return true\n\n              alert(\"You are not allowed to access\")\n              return false\n         })\n          .catch((err) => {\n              return false\n          });\n  }\n\n  return (\n    <div\n      style={{ height: \"100vh\" }}\n      className=\"d-flex justify-content-center align-items-center\"\n    >\n      <div style={{ width: 400 }}>\n        <h2 className=\"text-center\">Báo mới Press Notification</h2>\n        <h4 className=\"text-center\">Đăng nhập</h4>\n        <Form onSubmit={onFormSubmit}>\n          <Form.Group>\n            <Form.Label>Username</Form.Label>\n            <Form.Control\n              type=\"username\"\n              placeholder=\"Enter username\"\n              onChange={e => {\n                setUsername(e.target.value);\n              }}\n            />\n          </Form.Group>\n\n          <Form.Group>\n            <Form.Label>Password</Form.Label>\n            <Form.Control\n              type=\"password\"\n              placeholder=\"Password\"\n              onChange={e => {\n                setPassword(e.target.value);\n              }}\n            />\n          </Form.Group>\n          <Button\n            variant=\"primary\"\n            type=\"submit\"\n            className=\"w-100 mt-3\"\n          >\n            Sign In as Admin\n          </Button>\n        </Form>\n      </div>\n    </div>\n  );\n};\n\nexport default SignIn;","import React, { useContext } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport { authContext } from \"../contexts/AuthContext\";\n\nconst Panel = ({history}) => {\n  const { setAuthData, auth } = useContext(authContext);\n\n  const onLogOut = () => {\n    setAuthData(null);\n  }\n\n  const switchToNotificationCenter = () => {\n      history.push('/notification-sender')\n  }\n\n  const switchToNotificationCron = () => {\n      history.push('/notification-cron')\n  }\n\n  return (\n    <div\n      style={{ height: \"100vh\" }}\n      className=\"d-flex justify-content-center align-items-center\"\n    >\n      <div style={{ width: 300 }}>\n        <h1 className=\"text-center\"> {`Hello, ${auth.data.username}`} </h1>\n        <Button\n          variant=\"primary\"\n          type=\"button\"\n          className=\"w-100 mt-3\"\n          onClick={switchToNotificationCenter}\n        >\n          Gửi thông báo\n        </Button>\n\n        <Button\n          variant=\"primary\"\n          type=\"button\"\n          className=\"w-100 mt-3\"\n          onClick={switchToNotificationCron}\n        >\n          Cron thông báo\n        </Button>\n\n        <Button\n          variant=\"primary\"\n          type=\"button\"\n          className=\"w-100 mt-5\"\n          onClick={onLogOut}\n        >\n          Log out\n        </Button>\n      </div>\n    </div>\n  );\n};\n\nexport default Panel;","import React, { useState, useEffect, useLayoutEffect, useRef } from 'react';\nimport {\n    Dropdown,\n    DropdownButton,\n    Form,\n    Row,\n    Col,\n    Button,\n    ProgressBar,\n    Spinner,\n    Modal\n} from 'react-bootstrap';\nimport axios from 'axios';\nimport { apiUrl } from '../constants/api';\nimport DateTimePicker from 'react-datetime-picker';\nimport CronBuilder from 'react-cron-builder';\nimport 'react-cron-builder/dist/bundle.css';\n\n\nconst NotificationCenter = ({history}) => {\n    const [title, setTitle] = useState()\n    const [body, setBody] = useState()\n    const [imageURL, setImageURL] = useState()\n    const [slugData, setSlugData] = useState()\n\n    const [recipientOption, setRecipientOption] = useState()\n    const [singleFCMToken, setSingleFCMToken] = useState()\n    const [gender, setGender] = useState()\n    const [hobby, setHobby] = useState()\n    const [ageRange, setAgeRange] = useState()\n    const [validRecipientsNumber, setValidRecipientsNumber] = useState(0)\n    const [isCheckingValidRecipients, setCheckingValidRecipients] = useState(false)\n    const [filterQuery, setFilterQuery] = useState()\n    const [sendingProgress, setSendingProgress] = useState(0)\n\n    const [scheduleOption, setScheduleOption] = useState()\n    const [scheduleDateTime, setScheduleDateTime] = useState(new Date())\n    const [scheduleRecurringExpression, setScheduleRecurringExpression] = useState('* * * * * * *')\n    const [modalShow, setModalShow] = useState(false)\n\n\n    const firstUpdate = useRef(true);\n\n    useLayoutEffect(() => {\n        if (firstUpdate.current) {\n            firstUpdate.current = false;\n            return;\n        }\n        setCheckingValidRecipients(true)\n        checkValidRecipients()\n    }, [hobby, gender, ageRange]);\n\n    const onChangeRecipientRadio = (e) => {\n        setRecipientOption(e.target.id)\n    }\n\n    const checkValidRecipients = () => {\n        const generalQuery = apiUrl + \"users?per_page=1\"\n        let genderQuery = \"\"\n        let hobbyQuery = \"\"\n        let ageRangeQuery = \"\"\n        let queryOrder = 0\n\n        if(gender) {\n            genderQuery = \"&filter[meta_query][\" + queryOrder + \"][key]=gender&filter[meta_query][\" + queryOrder + \"][value]=\" + gender.toString()\n            queryOrder++\n        }\n\n        if(hobby) {\n            hobbyQuery = \"&filter[meta_query][\" + queryOrder + \"][key]=so_thich&filter[meta_query][\" + queryOrder + \"][value]=\" + hobby.toString()\n            queryOrder++\n        }\n\n        if(ageRange) {\n            ageRangeQuery = \"&filter[meta_query][\" + queryOrder + \"][key]=age&filter[meta_query][\" + queryOrder + \"][value]=\" + ageRange.split(\"-\")[0] + \"&filter[meta_query][\" + queryOrder + \"][compare]=>\"\n            queryOrder++\n            ageRangeQuery = ageRangeQuery + \"&filter[meta_query][\" + queryOrder + \"][key]=age&filter[meta_query][\" + queryOrder + \"][value]=\" + ageRange.split(\"-\")[1] + \"&filter[meta_query][\" + queryOrder + \"][compare]=<=\"\n        }\n\n        //set query for later API calling\n        setFilterQuery(genderQuery + hobbyQuery + ageRangeQuery)\n\n        axios.get(generalQuery + genderQuery + hobbyQuery + ageRangeQuery)\n        .then(res => {\n            setValidRecipientsNumber(res.headers[\"x-wp-total\"])\n            setCheckingValidRecipients(false)\n        })\n        .catch(err => {\n            console.log(err)\n        })\n    }\n\n    const onSendSingleRecipient = () => {\n        sendScheduleNotifsToServer([singleFCMToken])\n        setSendingProgress(100)\n    }\n\n    const onSendFilterRecipients = async() => {\n\n        if(validRecipientsNumber){\n            for (var batchNumber = 0; batchNumber <= validRecipientsNumber/1000 ; batchNumber++) {\n                let promises = [];\n\n                for (var pageNumber = batchNumber * 10 + 1; pageNumber <= batchNumber * 10 + 10 ; pageNumber++) {\n                    const url = apiUrl + \"users?per_page=100&page=\" + pageNumber.toString() + filterQuery\n                    promises.push(axios.get(url))\n                }\n\n                await axios.all(promises).then(results => {\n                    let fcmTokensBatch = []\n                    results.forEach(chunk => {\n                        if(chunk.data.length) {\n                            let fcmTokens = chunk.data.map(item => item.acf.fcmToken)\n                            fcmTokensBatch = [...fcmTokensBatch, ...fcmTokens]\n                        }\n                    })\n                    setSendingProgress((batchNumber + 1) / (validRecipientsNumber/1000 + 1) * 100)\n\n                    sendScheduleNotifsToServer(fcmTokensBatch)\n                });\n            }\n        }\n    }\n\n    const onSendAllRecipients = () => {\n        sendScheduleNotifsToServer([], \"news\")\n    }\n\n    const sendNotifsToServer = (tokens, topics) => {\n        axios.post(\"/fcm-sender\", {\n            title: title,\n            body: body,\n            slug: slugData || \"\",\n            image: imageURL || \"\",\n            tokens: tokens.toString(),\n            topics: topics || \"\",\n        })\n            .then(res => console.log(res))\n            .catch(err => console.log(err))\n    }\n\n    const sendScheduleNotifsToServer = (tokens, topics) => {\n        const scheduleData = { dateTime: scheduleDateTime, recurringExpression: scheduleRecurringExpression }\n\n        axios.post(\"/fcm-schedule-sender\", {\n            data : {\n                title: title,\n                body: body,\n                slug: slugData || \"\",\n                image: imageURL || \"\",\n                tokens: tokens.toString(),\n                topics: topics || \"\",\n                scheduleAction: scheduleOption,\n                scheduleData: scheduleData\n            }\n        })\n            .then(res => console.log(res))\n            .catch(err => console.log(err))\n    }\n\n\n    const onChangeScheduleRadio = (e) => {\n        setScheduleOption(e.target.id)\n        if(e.target.id === 'recurring') setModalShow(true)\n    }\n\n    const onChangeScheduleDateTime = (newDate) => {\n        setScheduleDateTime(newDate)\n    }\n\n    const onChangeScheduleRecurringExpression = (value) => {\n        setScheduleRecurringExpression(value)\n    }\n\n    const onPressSendButton = () => {\n        if(recipientOption === 'singleRecipient') {\n            onSendSingleRecipient()\n        }\n\n        if(recipientOption === 'filterRecipients') {\n            onSendFilterRecipients()\n        }\n\n        if(recipientOption === 'allRecipients') {\n            onSendAllRecipients()\n            setSendingProgress(100)\n        }\n    }\n\n    const onNavigateScheduleHistory = () => {\n        history.push('/schedule-history')\n    }\n\n\n    return(\n        <div\n          style={{ height: \"100vh\", marginTop: 10 }}\n          className=\"d-flex flex-row justify-content-center align-items-center\"\n        >\n            <div\n                style={{ position: 'absolute', top: 20, right: 20 }}\n            >\n                <Button variant=\"link\" onClick={onNavigateScheduleHistory}>Lịch sử kế hoạch >></Button>\n            </div>\n\n            <div\n                style={{ height: 350, width: 320, marginRight: 20, borderStyle:\"ridge\" ,borderWidth: 1, borderRadius: 10, padding: 20, overflow: 'scroll' }}\n            >\n                <Form>\n                  <Form.Group as={Row} controlId=\"formTitle\">\n                    <Form.Label column sm={2}>\n                      Title\n                    </Form.Label>\n                    <Col sm={10}>\n                      <Form.Control required type=\"text\" placeholder=\"Title\" onChange={e => setTitle(e.target.value)} />\n                    </Col>\n                  </Form.Group>\n\n                  <Form.Group controlId=\"formBody\">\n                    <Form.Label>Body</Form.Label>\n                    <Form.Control required as=\"textarea\" rows=\"3\" placeholder=\"Body\" onChange={e => setBody(e.target.value)} />\n                  </Form.Group>\n\n                  <Form.Group as={Row} controlId=\"formImageURL\">\n                    <Form.Label column sm={2}>\n                      Image\n                    </Form.Label>\n                    <Col sm={10}>\n                      <Form.Control type=\"text\" placeholder=\"Image Url(not required)\" onChange={e => setImageURL(e.target.value)} />\n                    </Col>\n                  </Form.Group>\n\n                  <Form.Group as={Row} controlId=\"formSlugData\">\n                    <Form.Label column sm={2}>\n                      Slug\n                    </Form.Label>\n                    <Col sm={10}>\n                      <Form.Control type=\"text\" placeholder=\"Slug Data(not required)\" onChange={e => setSlugData(e.target.value)} />\n                    </Col>\n                  </Form.Group>\n                </Form>\n            </div>\n            <div\n                style={{ height: 350, width: 320, marginLeft: 20, borderStyle:\"ridge\" ,borderWidth: 1, borderRadius: 10, padding: 20, overflow: 'scroll' }}\n            >\n                <fieldset>\n                  <Form.Group as={Row}>\n                    <Form.Label as=\"legend\" column sm={2}>\n                      Gửi cho\n                    </Form.Label>\n                    <Col sm={10}>\n                      <Form.Check\n                        type=\"radio\"\n                        label=\"Một đối tượng\"\n                        name=\"recipientOption\"\n                        id=\"singleRecipient\"\n                        onChange={onChangeRecipientRadio}\n                      />\n                      <Form.Check\n                        type=\"radio\"\n                        label=\"Nhóm đối tượng\"\n                        name=\"recipientOption\"\n                        id=\"filterRecipients\"\n                        onChange={onChangeRecipientRadio}\n                      />\n                      <Form.Check\n                        type=\"radio\"\n                        label=\"Tất cả\"\n                        name=\"recipientOption\"\n                        id=\"allRecipients\"\n                        onChange={onChangeRecipientRadio}\n                      />\n                    </Col>\n                  </Form.Group>\n                </fieldset>\n\n                {recipientOption === 'singleRecipient' &&\n                    <Form onSubmit={onSendSingleRecipient}>\n                        <Form.Group as={Row} controlId=\"formFCMToken\">\n                          <Form.Label column sm={2}>\n                            Token\n                          </Form.Label>\n                          <Col sm={10}>\n                            <Form.Control type=\"text\" placeholder=\"FCM Token\" onChange={e => setSingleFCMToken(e.target.value)} />\n                          </Col>\n                        </Form.Group>\n                    </Form>\n                }\n\n                {recipientOption === 'filterRecipients' &&\n                <div\n                   className=\"d-flex flex-row justify-content-space-between align-items-start\"\n                 >\n                    <div\n                        style={{ marginRight: 10 }}\n                    >\n                        <DropdownButton\n                          id=\"dropdown-hobby\"\n                          title=\"Lọc sở thích\"\n                          onSelect={e => setHobby(e)}\n                        >\n                          <Dropdown.Item eventKey=\"Cà phê\">Cà phê</Dropdown.Item>\n                          <Dropdown.Item eventKey=\"Nghe nhạc\">Nghe nhạc</Dropdown.Item>\n                          <Dropdown.Item eventKey=\"Xem phim\">Xem phim</Dropdown.Item>\n                          <Dropdown.Item eventKey=\"Đá bóng\">Đá bóng</Dropdown.Item>\n                        </DropdownButton>\n\n                        <DropdownButton\n                          id=\"dropdown-gender\"\n                          style={{ marginTop: 10 }}\n                          title=\"Lọc giới tính\"\n                          onSelect={e => setGender(e)}\n                        >\n                          <Dropdown.Item eventKey=\"Nam\">Nam</Dropdown.Item>\n                          <Dropdown.Item eventKey=\"Nữ\">Nữ</Dropdown.Item>\n                        </DropdownButton>\n\n                        <DropdownButton\n                          id=\"dropdown-ageRange\"\n                          style={{ marginTop: 10, marginBottom: 10 }}\n                          title=\"Lọc độ tuổi\"\n                          onSelect={e => setAgeRange(e)}\n                        >\n                          <Dropdown.Item eventKey=\"0-25\">0-25</Dropdown.Item>\n                          <Dropdown.Item eventKey=\"25-40\">25-40</Dropdown.Item>\n                          <Dropdown.Item eventKey=\"40-55\">40-55</Dropdown.Item>\n                          <Dropdown.Item eventKey=\"55-99\">55-99</Dropdown.Item>\n                        </DropdownButton>\n\n                    </div>\n                    <div\n                        style={{ marginLeft: 10 }}\n                    >\n                        <div className=\"d-flex flex-row align-items-center\">\n                            <h6> {validRecipientsNumber} valid users </h6>\n                            {isCheckingValidRecipients && <Spinner animation=\"grow\" /> }\n                        </div>\n\n                        <p>\n                            {hobby && <em> có sở thích: {hobby} <br/></em> }\n\n                            {gender && <em> có giới tính: {gender} <br/></em> }\n                            {ageRange && <em> có độ tuổi: {ageRange} </em> }\n                        </p>\n\n                        <Button variant=\"primary\"\n                            onClick={e => {\n                                setHobby(null)\n                                setGender(null)\n                                setAgeRange(null)\n                                setSendingProgress(0)\n                            }}\n                        >\n                            Huỷ lọc\n                        </Button>\n\n                    </div>\n                </div>\n                }\n\n            </div>\n\n            <div\n                style={{ height: 350, width: 320, marginLeft: 20, borderStyle:\"ridge\" ,borderWidth: 1, borderRadius: 10, padding: 20, overflow: 'scroll' }}\n            >\n                <fieldset>\n                  <Form.Group as={Row}>\n                    <Form.Label as=\"legend\" column sm={2}>\n                      Kế hoạch\n                    </Form.Label>\n                    <Col sm={10}>\n                      <Form.Check\n                        type=\"radio\"\n                        label=\"Now\"\n                        name=\"scheduleOption\"\n                        id=\"now\"\n                        onChange={onChangeScheduleRadio}\n                      />\n                      <Form.Check\n                        type=\"radio\"\n                        label=\"Scheduled\"\n                        name=\"scheduleOption\"\n                        id=\"scheduled\"\n                        onChange={onChangeScheduleRadio}\n                      />\n                      <Form.Check\n                        type=\"radio\"\n                        label=\"Recurring\"\n                        name=\"scheduleOption\"\n                        id=\"recurring\"\n                        onChange={onChangeScheduleRadio}\n                      />\n                    </Col>\n                  </Form.Group>\n                </fieldset>\n\n                {scheduleOption === 'scheduled' &&\n                <div\n                 style={{ marginBottom: 20 }}\n                 >\n                    <DateTimePicker\n                      onChange={onChangeScheduleDateTime}\n                      value={scheduleDateTime}\n                    />\n                </div>\n                }\n\n                <Modal\n                  show={modalShow}\n                  onHide={() => setModalShow(false)}\n                  size=\"lg\"\n                  aria-labelledby=\"example-custom-modal-styling-title\"\n                >\n                  <Modal.Header closeButton>\n                    <Modal.Title id=\"example-custom-modal-styling-title\">\n                      Recurring Builder Modal\n                    </Modal.Title>\n                  </Modal.Header>\n                  <Modal.Body>\n                    <CronBuilder\n                        cronExpression={scheduleRecurringExpression}\n                        onChange={onChangeScheduleRecurringExpression}\n                        showResult={true}\n                    />\n                  </Modal.Body>\n                </Modal>\n                {scheduleOption === 'recurring' &&\n                <p>\n                    {scheduleRecurringExpression}\n                </p>\n                }\n\n                <ProgressBar now={sendingProgress} />\n                {(!sendingProgress || recipientOption !== 'filterRecipients') &&\n                <Button variant=\"primary\" onClick={onPressSendButton} style={{ marginTop: 10 }}>\n                    Send!\n                </Button>\n                }\n\n            </div>\n\n\n\n        </div>\n    )\n}\n\nexport default NotificationCenter;\n","import React, { useEffect, useState } from \"react\";\nimport { Button } from \"react-bootstrap\";\nimport axios from 'axios';\n\nconst NotificationCron = ({history}) => {\n  const [isCheckingCurrentTask, setCheckingCurrentTask] = useState(false)\n  const [isTaskRunning, setTaskRunning] = useState(false)\n  const [isServerError, setServerError] = useState(false)\n\n  const checkCronjob = () => {\n      setCheckingCurrentTask(true)\n\n      axios.post('/fcm-cron', {\n          action: \"checkRunningTask\"\n      })\n      .then(res => {\n          const message = res.data\n          setCheckingCurrentTask(false)\n\n          if(message === \"scheduled\") {\n              setTaskRunning(true)\n          }\n\n          if(message === \"destroyed\" || message === \"null\") {\n              setTaskRunning(false)\n          }\n      })\n      .catch(err => {\n          console.log(err)\n          setServerError(true)\n      })\n  }\n\n  useEffect(() => {\n      checkCronjob()\n  }, []);\n\n  const startCronjob = (e) => {\n      e.preventDefault()\n      axios.post('/fcm-cron', {\n          action: \"start\"\n      })\n      .then(res => checkCronjob())\n      .catch(err => console.log(err))\n  }\n\n  const destroyCronjob = (e) => {\n      e.preventDefault()\n      axios.post('/fcm-cron', {\n          action: \"destroy\"\n      })\n      .then(res => checkCronjob())\n      .catch(err => console.log(err))\n  }\n\n  return (\n    <div\n      style={{ height: \"100vh\" }}\n      className=\"d-flex justify-content-center align-items-center\"\n    >\n      <div style={{ width: 300 }}>\n        <h1 className=\"text-center\"> {`Cron Center`} </h1>\n        <h6 className=\"text-center\"> {`Cron latest post every 4 hours`} </h6>\n\n        {!isServerError &&\n        <div>\n            {!isTaskRunning &&\n            <Button\n              variant=\"primary\"\n              type=\"button\"\n              className=\"w-100 mt-3\"\n              onClick={startCronjob}\n            >\n              Start\n            </Button>\n            }\n\n            {isTaskRunning &&\n            <Button\n              variant=\"primary\"\n              type=\"button\"\n              className=\"w-100 mt-3\"\n              onClick={destroyCronjob}\n            >\n              STOP\n            </Button>\n            }\n\n            {isCheckingCurrentTask && <p>Checking if task is running...</p>}\n        </div>\n        }\n\n      </div>\n    </div>\n  );\n};\n\nexport default NotificationCron;","import React, { useState, useEffect } from \"react\";\nimport { Button, ListGroup } from \"react-bootstrap\";\nimport axios from 'axios';\nimport cronstrue from 'cronstrue';\n\n\nconst ScheduleHistory = ({history}) => {\n    const [scheduledPlans, setScheduledPlans] = useState([])\n\n    const getScheduledPlans = () => {\n        axios.post(\"/fcm-schedule-sender\", {\n            data : {\n                scheduleAction: \"checkCurrentTasks\",\n                scheduleData: {}\n            }\n        })\n            .then(res => {\n                setScheduledPlans(res.data)\n            })\n            .catch(err => console.log(err))\n    }\n\n    useEffect(() => {\n        getScheduledPlans()\n    }, [])\n\n    const onDeletePlan = (index) => {\n        axios.post(\"/fcm-schedule-sender\", {\n            data : {\n                scheduleAction: \"deleteTask\",\n                scheduleData: { deleteTaskIndex: index }\n            }\n        })\n            .then(res => {\n                getScheduledPlans()\n            })\n            .catch(err => console.log(err))\n    }\n\n    return (\n        <div\n            style={{ height: \"100vh\" }}\n            className=\"d-flex flex-column justify-content-center align-items-center\"\n        >\n            <div style={{ width: 500 }}>\n                <h1 className=\"text-center\"> {`Các kế hoạch đã tạo`} </h1>\n                <h6 className=\"text-center\"> {`Không bao gồm kế hoạch được gửi lập tức`} </h6>\n            </div>\n\n            <ListGroup variant=\"flush\">\n                {scheduledPlans.map((plan, idx) => {\n                    const dateTime = plan.scheduleData.dateTime\n                    const cronExpression = plan.scheduleData.recurringExpression\n                    let formattedDT, formattedCron;\n\n                    if(dateTime)\n                        formattedDT = dateTime.getFullYear() + \"-\" + (dateTime.getMonth() + 1) + \"-\" + dateTime.getDate() + \" \" + dateTime.getHours() + \":\" + dateTime.getMinutes() + \":\" + dateTime.getSeconds()\n\n                    if(cronExpression)\n                        formattedCron = cronstrue.toString(cronExpression)\n\n                    return(\n                        <ListGroup.Item key={idx}>\n                            <div\n                                className=\"d-flex flex-row justify-content-between align-items-center\"\n                            >\n                                <div\n                                    className=\"d-flex flex-column justify-content-between align-items-center\"\n                                >\n                                    <em>Nội dung tiêu đề: {plan.title || \"\"}</em>\n                                    <em>{(plan.scheduleAction === 'scheduled') ? formattedDT  : \"\"}</em>\n                                    <em>{(plan.scheduleAction === 'recurring') ? formattedCron : \"\"}</em>\n                                </div>\n                                <Button style={{ marginLeft: 10 }} variant=\"danger\" onClick={(e) => { onDeletePlan(idx) }}>Xoá</Button>\n                            </div>\n                        </ListGroup.Item>\n                    )\n                })\n                }\n            </ListGroup>\n\n\n\n      </div>\n    );\n};\n\nexport default ScheduleHistory;","import React, { useContext } from 'react';\nimport { Route, Redirect } from 'react-router-dom';\nimport { authContext } from '../contexts/AuthContext';\n\nconst PrivateRoute = ({ component: Component, ...rest }) => {\n  const { auth } = useContext(authContext);\n  const { loading } = auth;\n\n  if (loading) {\n    return (\n      <Route\n        {...rest}\n        render={() => {\n          return <p>Loading...</p>;\n        }}\n      />\n    );\n  }\n// if loading is set to true (when our function useEffect(() => {}, []) is not executed), we are rendering a loading component;\n\n  return (\n    <Route\n      {...rest}\n      render={routeProps => {\n        return auth.data ? (\n          <Component {...routeProps} />\n        ) : (\n          <Redirect to=\"/sign-in\" />\n        );\n      }}\n    />\n  );\n};\n\nexport default PrivateRoute;","import React, { Component } from \"react\";\nimport \"./App.css\";\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport { Switch, BrowserRouter, Route } from 'react-router-dom';\nimport SignIn from './screens/SignIn';\nimport Panel from './screens/Panel';\nimport NotificationCenter from './screens/NotificationCenter';\nimport NotificationCron from './screens/NotificationCron';\nimport ScheduleHistory from './screens/ScheduleHistory';\nimport PrivateRoute from './components/PrivateRoute';\n\nclass App extends Component {\n    render() {\n        return (\n            <BrowserRouter>\n                <Switch>\n                  <Route path=\"/sign-in\" component={SignIn} />\n                  <PrivateRoute path=\"/notification-cron\" component={NotificationCron} />\n                  <PrivateRoute path=\"/schedule-history\" component={ScheduleHistory} />\n                  <PrivateRoute path=\"/notification-sender\" component={NotificationCenter} />\n                  <PrivateRoute path=\"/\" component={Panel} />\n                </Switch>\n            </BrowserRouter>\n        );\n    }\n}\n\nexport default App;\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport AuthProvider from './contexts/AuthContext';\nimport registerServiceWorker from './registerServiceWorker';\n\nReactDOM.render(\n  (\n    <AuthProvider>\n      <App />\n    </AuthProvider>\n  ),\n  document.getElementById('root'),\n);\nregisterServiceWorker();\n"],"sourceRoot":""}